<h1>Simon-Ehrlich Wager</h1>

<figure>
  <BasketValue prices="{{wagerData}}" />
</figure>

<input style="width:100%"
  type="range" min="1900" max="2005" value="{{startDate}}" step="1"
  on:change="set({startDate: +event.target.value, endDate: +event.target.value + duration})"/>

<script>
  import {scaleOrdinal, schemeCategory10} from "d3-scale";
  
  import {simonEhrlichWager} from "./model.js";

  import BasketValue from "./components/BasketValue.html";
  import PriceHx from "./components/PriceHx.html";
  import WagerPeriod from "./components/WagerPeriod.html";
  
  export default {
    components: {
      BasketValue,
      PriceHx,
      WagerPeriod
    },
    
    data() {
      return {
        duration: 10
      };
    },
    
    computed: {
      wagerData: (prices, startDate, endDate, wager) => {
        return simonEhrlichWager(prices, startDate, endDate, wager);
      },
      
      color: (prices) => (scaleOrdinal(schemeCategory10)
        .domain(new Set(prices.map(d => d.type))))
    }
  };
</script>